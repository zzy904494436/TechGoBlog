# Java多线程(一)

## 进程和线程

**进程**:**操作系统**进行资源分配的最小单位

**线程**:**CPU**调度的最小单位

### CPU核心数和线程数的关系

内核-4 逻辑处理器-8  同时跑8个线程

### CPU时间片轮转机制 - (RR调度)

CPU 1.6G 执行一条指令 0.6ns 

所以时间分片,在人不感知情况下,可以实现

#### 上下文切换:

进程时间到,占用资源(内存、寄存器)要让出,给其他进程,大约2w时间周期,尽量减少切换次数.

### 并行和并发

**并行**:可以同时运行的任务数.

**并发**:时间单位,单位时间内并发量,1min内并发量,交替进行

### 好处、意义、注意事项

充分的利用CPU资源;

加快响应用户的时间;

使代码模块化、异步化;

#### OS限制线程数量:

Linux:1000个/进程 1G 

Windows:2000个/进程  2G

栈空间 1M   -- 句柄 文件描述符

需要用线程池来复用线程数量

申请内存是以进程来申请的

### Java天生多线程

main线程、Finalizer线程(调用finalize(),方法不靠谱,守护线程)、Reference Handler

Monitor Ctrl-Break(中断信号)、Attach Listener(dump信息)

#### 新启线程的方式

- Runable
- 类Thread

##### 区别:

类Thread才是Java语言里对线程的抽象, Runable不是线程,是对任务(业务逻辑)的抽象.

####  停止线程的方式

suspend、stop等执行,有强制性,拿锁不会释放,stop直接停掉,是否持有资源不重要,